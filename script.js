const translations = {
    en: {
        nav: {
            about: "About",
            skills: "Skills",
            projects: "Projects",
            experience: "Experience",
            services: "Services",
            contact: "Contact"
        },
        hero: {
            name: "Mohamed Khaled",
            role: "Graphic Designer & <span class=\"text-highlight\">AI Innovator</span>",
            description: "Bridging the gap between administrative precision and creative excellence through AI-enhanced design. Delivering high-impact visual solutions that solve business problems.",
            viewProjects: "View Projects",
            contactMe: "Contact Me"
        },
        about: {
            title: "About Me",
            text1: "I am a <strong>Senior Management and Accounting student (Class of 2026)</strong> who masterfully blends the analytical mindset of an accountant with the creative vision of a designer.",
            text2: "My professional journey—ranging from operational excellence at Islam Fathi Pharmacies to independent graphic design—has taught me that technology is most powerful when it serves a strategic purpose. I specialize in integrating <strong>AI workflows</strong> into the creative process to deliver high-quality, market-ready visuals with unprecedented efficiency.",
            quote: "\"Technology is most powerful when it serves a strategic purpose.\""
        },
        skills: {
            title: "Skills & Expertise",
            design: {
                title: "Creative Design",
                1: "Visual Branding",
                2: "Social Media Content",
                3: "Canva Expert",
                4: "UI/UX Concepts"
            },
            ai: {
                title: "AI Mastery",
                1: "Prompt Engineering",
                2: "AI Workflow Integration",
                3: "Generative Visuals"
            },
            management: {
                title: "Management",
                1: "Strategic Communication",
                2: "HR Coordination",
                3: "Inventory Management",
                4: "Professional Reporting"
            },
            software: {
                title: "Software",
                1: "Canva",
                2: "AI Design Tools",
                3: "Microsoft Office"
            }
        },
        projects: {
            title: "Featured Projects",
            p1: {
                title: "The Comprehensive Accountant App (Concept)",
                desc: "A visionary UI/UX project merging financial management principles with digital accessibility."
            },
            p2: {
                title: "Pharma-Visual Identity",
                desc: "A specialized design project for the medical sector focusing on trust and clarity."
            },
            p3: {
                title: "AI-Enhanced Personal Brand",
                desc: "A full-scale visual identity system built using 100% AI-assisted workflows."
            }
        },
        tags: {
            uiux: "UI/UX",
            finance: "Finance",
            branding: "Branding",
            medical: "Medical",
            ai: "AI",
            identity: "Identity"
        },
        experience: {
            title: "Professional Experience",
            e1: {
                date: "Current",
                role: "Independent Graphic Designer",
                company: "Freelance",
                desc: "Executed a diverse portfolio of pro-bono and conceptual projects to master market-driven design. Developed and tested personal social media ad campaigns using AI-enhanced visual strategies."
            },
            e2: {
                date: "Previous",
                role: "Pharmacist Assistant",
                company: "Islam Fathi Pharmacy Chain",
                desc: "Coordinated with Area Managers and HR to ensure operational efficiency and professional communication. Managed high-volume customer relations and inventory accuracy under pressure."
            }
        },
        services: {
            title: "Services",
            s1: {
                title: "Visual Identity Design",
                desc: "Creating cohesive brand identities for businesses."
            },
            s2: {
                title: "AI-Powered Content",
                desc: "Leveraging AI to produce high-end visuals at scale."
            },
            s3: {
                title: "Social Media Strategy",
                desc: "Designing high-conversion graphics for digital marketing."
            },
            s4: {
                title: "Admin Consultation",
                desc: "Bridging management systems with visual presentation."
            }
        },
        quote: {
            text: "\"To establish a premier digital presence that integrates financial intelligence with cutting-edge AI design, setting a new standard for how modern professionals manage and market their expertise.\""
        },
        contact: {
            title: "Get In Touch",
            name: "Name",
            email: "Email",
            message: "Message",
            send: "Send Message",
            connect: "Connect with me",
            connectDesc: "I'm always open to discussing new projects, creative ideas or opportunities to be part of your visions."
        },
        footer: {
            copyright: "&copy; 2024 Mohamed Khaled. All Rights Reserved.",
            backToTop: "Back to Top ↑"
        }
    },
    ar: {
        nav: {
            about: "عنـــي",
            skills: "المهارات",
            projects: "المشاريع",
            experience: "الخبرة",
            services: "الخدمات",
            contact: "تواصل معي"
        },
        hero: {
            name: "محمد خالد",
            role: "مصمم جرافيك ومبتكر بصري <span class=\"text-highlight\">بالذكاء الاصطناعي</span>",
            description: "سد الفجوة بين الدقة الإدارية والتميز الإبداعي من خلال التصميم المعزز بالذكاء الاصطناعي. تقديم حلول مرئية عالية التأثير تحل مشاكل الأعمال.",
            viewProjects: "عرض المشاريع",
            contactMe: "تواصل معي"
        },
        about: {
            title: "عني",
            text1: "أنا طالب في <strong>السنة الرابعة بإدارة الأعمال والمحاسبة (دفعة 2026)</strong>، أجمع ببراعة بين العقلية التحليلية للمحاسب والرؤية الإبداعية للمصمم.",
            text2: "علمتني رحلتي المهنية—التي تتراوح من التميز التشغيلي في صيدليات إسلام فتحي إلى التصميم الجرافيكي المستقل—أن التكنولوجيا تكون أقوى عندما تخدم غرضًا استراتيجيًا. أنا متخصص في دمج <strong>سير عمل الذكاء الاصطناعي</strong> في العملية الإبداعية لتقديم صور عالية الجودة وجاهزة للسوق بكفاءة غير مسبوقة.",
            quote: "\"التكنولوجيا تكون أقوى عندما تخدم غرضًا استراتيجيًا.\""
        },
        skills: {
            title: "المهارات والخبرات",
            design: {
                title: "التصميم الإبداعي",
                1: "الهوية البصرية",
                2: "محتوى وسائل التواصل الاجتماعي",
                3: "خبير في Canva",
                4: "مفاهيم UI/UX"
            },
            ai: {
                title: "إتقان الذكاء الاصطناعي",
                1: "هندسة الأوامر (Prompt Engineering)",
                2: "تكامل سير عمل الذكاء الاصطناعي",
                3: "المرئيات التوليدية"
            },
            management: {
                title: "الإدارة",
                1: "التواصل الاستراتيجي",
                2: "تنسيق الموارد البشرية",
                3: "إدارة المخزون",
                4: "التقارير المهنية"
            },
            software: {
                title: "البرمجيات",
                1: "Canva",
                2: "أدوات تصميم الذكاء الاصطناعي",
                3: "مايكروسوفت أوفيس"
            }
        },
        projects: {
            title: "مشاريع مميزة",
            p1: {
                title: "تطبيق المحاسب الشامل (مفهوم)",
                desc: "مشروع UI/UX رؤيوي يدمج مبادئ الإدارة المالية مع إمكانية الوصول الرقمي."
            },
            p2: {
                title: "الهوية البصرية للصيدليات",
                desc: "مشروع تصميم متخصص للقطاع الطبي يركز على الثقة والوضوح."
            },
            p3: {
                title: "العلامة التجارية الشخصية المعززة بالذكاء الاصطناعي",
                desc: "نظام هوية بصرية كامل تم بناؤه باستخدام سير عمل مدعوم بالذكاء الاصطناعي بنسبة 100%."
            }
        },
        tags: {
            uiux: "واجهة المستخدم",
            finance: "مالية",
            branding: "هوية بصرية",
            medical: "طبي",
            ai: "ذكاء اصطناعي",
            identity: "هوية"
        },
        experience: {
            title: "الخبرة المهنية",
            e1: {
                date: "حاليًا",
                role: "مصمم جرافيك مستقل",
                company: "فريلانسر",
                desc: "نفذت مجموعة متنوعة من المشاريع التطوعية والمفاهيمية لإتقان التصميم القائم على احتياجات السوق. قمت بتطوير واختبار حملات إعلانية شخصية على وسائل التواصل الاجتماعي باستخدام استراتيجيات بصرية محسنة بالذكاء الاصطناعي."
            },
            e2: {
                date: "سابقًا",
                role: "مساعد صيدلي",
                company: "سلسلة صيدليات إسلام فتحي",
                desc: "نسقت مع مديري المناطق والموارد البشرية لضمان الكفاءة التشغيلية والتواصل المهني. أدرت علاقات العملاء بحجم كبير ودقة المخزون تحت الضغط."
            }
        },
        services: {
            title: "الخدمات",
            s1: {
                title: "تصميم الهوية البصرية",
                desc: "إنشاء هويات علامات تجارية متماسكة للشركات."
            },
            s2: {
                title: "المحتوى المدعوم بالذكاء الاصطناعي",
                desc: "الاستفادة من الذكاء الاصطناعي لإنتاج مرئيات عالية الجودة."
            },
            s3: {
                title: "استراتيجية وسائل التواصل الاجتماعي",
                desc: "تصميم رسومات عالية التحويل للتسويق الرقمي."
            },
            s4: {
                title: "الاستشارات الإدارية",
                desc: "سد الفجوة بين أنظمة الإدارة والعرض المرئي."
            }
        },
        quote: {
            text: "\"تأسيس حضور رقمي رائد يدمج الذكاء المالي مع تصميم الذكاء الاصطناعي المتطور، ووضع معيار جديد لكيفية إدارة وتسويق المحترفين المعاصرين لخبراتهم.\""
        },
        contact: {
            title: "تواصل معي",
            name: "الاسم",
            email: "البريد الإلكتروني",
            message: "الرسالة",
            send: "إرسال الرسالة",
            connect: "تواصل معي",
            connectDesc: "متاح دائمًا لمناقشة المشاريع الجديدة والأفكار الإبداعية أو الفرص لأكون جزءًا من رؤيتكم."
        },
        footer: {
            copyright: "&copy; 2024 محمد خالد. جميع الحقوق محفوظة.",
            backToTop: "العودة للأعلى ↑"
        }
    }
};

document.addEventListener('DOMContentLoaded', () => {

    // Theme Switcher
    const themeToggle = document.getElementById('theme-toggle');
    const htmlElement = document.documentElement;

    // Language Switcher
    const langToggle = document.getElementById('lang-toggle');
    const langBtn = document.querySelector('.lang-btn');

    // Initialization
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme) {
        htmlElement.setAttribute('data-theme', savedTheme);
    }

    const savedLang = localStorage.getItem('lang') || 'en';
    setLanguage(savedLang);

    // Event Listeners
    themeToggle.addEventListener('click', () => {
        const currentTheme = htmlElement.getAttribute('data-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

        htmlElement.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
    });

    langToggle.addEventListener('click', () => {
        const currentLang = htmlElement.getAttribute('lang');
        const newLang = currentLang === 'en' ? 'ar' : 'en';
        setLanguage(newLang);
    });

    function setLanguage(lang) {
        htmlElement.setAttribute('lang', lang);
        htmlElement.setAttribute('dir', lang === 'ar' ? 'rtl' : 'ltr');
        localStorage.setItem('lang', lang);

        // Update button text
        langBtn.textContent = lang === 'en' ? 'عربي' : 'English';

        // Update content
        updateContent(lang);
    }

    function updateContent(lang) {
        document.querySelectorAll('[data-i18n]').forEach(element => {
            const key = element.getAttribute('data-i18n');
            const translation = getNestedTranslation(translations[lang], key);

            if (translation) {
                if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                    if (element.hasAttribute('placeholder')) {
                        element.setAttribute('placeholder', translation);
                    }
                    // For labels that might be associated
                    const id = element.id;
                    const label = document.querySelector(`label[for="${id}"]`);
                    if (label) {
                        // The label should have its own data-i18n, but just in case
                    }
                } else {
                    element.innerHTML = translation;
                }
            }
        });
    }

    function getNestedTranslation(obj, path) {
        return path.split('.').reduce((prev, curr) => {
            return prev ? prev[curr] : null;
        }, obj);
    }

    // Mobile Menu
    const hamburger = document.querySelector('.hamburger');
    const mobileMenu = document.querySelector('.mobile-menu');
    const mobileLinks = document.querySelectorAll('.mobile-menu-links a');

    hamburger.addEventListener('click', () => {
        hamburger.classList.toggle('active');
        mobileMenu.classList.toggle('active');
        document.body.style.overflow = mobileMenu.classList.contains('active') ? 'hidden' : 'auto';
    });

    mobileLinks.forEach(link => {
        link.addEventListener('click', () => {
            hamburger.classList.remove('active');
            mobileMenu.classList.remove('active');
            document.body.style.overflow = 'auto';
        });
    });

    // Intersection Observer for Scroll Animations
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('visible');
                observer.unobserve(entry.target); // Only animate once
            }
        });
    }, observerOptions);

    const animatedElements = document.querySelectorAll('.fade-in, .fade-in-up, .fade-in-left, .fade-in-right');
    animatedElements.forEach(el => observer.observe(el));

    // Smooth scrolling for anchor links (fallback for browsers that don't support scroll-behavior: smooth in CSS)
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const targetId = this.getAttribute('href');
            if (targetId === '#') return;

            const targetElement = document.querySelector(targetId);
            if (targetElement) {
                targetElement.scrollIntoView({
                    behavior: 'smooth'
                });
            }
        });
    });
});
